# 学生成绩管理系统

一个基于 Next.js 的现代化学生成绩录入和可视化分析管理系统。

## 🚀 功能特性

### 核心功能
- ✅ **手动录入成绩** - 支持按班级、学生、考试、科目录入分数，实时显示成绩变化
- ✅ **Excel批量导入** - 上传Excel文件自动解析，批量入库，支持班级平均分统计
- ✅ **可视化分析** - 丰富的图表展示学生成绩趋势和班级数据分析
- ✅ **智能数据管理** - 自动创建班级、学生、考试信息，避免重复录入

### 数据分析
- 📊 **学生个人分析** - 成绩趋势图、班级排名变化、科目平均分
- 📈 **班级整体分析** - 班级平均分趋势、成绩分布统计、科目对比
- 🎯 **成绩对比** - 历次考试成绩对比、排名变化追踪

## 🛠 技术栈

- **前端**: Next.js 14 + TypeScript + Tailwind CSS
- **UI组件**: shadcn/ui + Radix UI
- **数据库**: SQLite + Prisma ORM
- **图表**: Recharts
- **Excel处理**: XLSX

## 📁 项目结构

```
src/
├── app/
│   ├── api/                    # API 路由
│   │   ├── analytics/          # 数据分析 API
│   │   ├── classes/           # 班级管理 API
│   │   ├── students/          # 学生管理 API
│   │   ├── exams/             # 考试管理 API
│   │   └── scores/            # 成绩管理 API
│   ├── analysis/              # 分析页面
│   │   ├── student/           # 学生分析
│   │   └── class/             # 班级分析
│   └── scores/                # 成绩管理页面
│       ├── add/               # 手动录入
│       └── import/            # Excel导入
├── components/                # 可复用组件
│   ├── ui/                    # 基础UI组件
│   ├── AddScoreForm.tsx       # 成绩录入表单
│   └── ImportScoreForm.tsx    # Excel导入组件
└── lib/                       # 工具函数
```

## 🚀 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 初始化数据库
```bash
# 应用数据库迁移
npx prisma migrate dev

# 生成 Prisma 客户端
npx prisma generate

# 初始化示例数据
npm run db:seed
```

### 3. 启动开发服务器
```bash
npm run dev
```

访问 http://localhost:3000 开始使用系统！

## 📋 使用指南

### 成绩录入
1. 点击主页的"成绩录入"卡片
2. 依次选择班级、学生、考试、科目
3. 输入分数(0-100)并提交
4. 系统会自动验证并防止重复录入

### Excel批量导入
1. 点击主页的"Excel导入"卡片
2. 上传包含以下列的Excel文件：
   - **学生姓名** (必需)
   - **班级** (必需) 
   - **考试名称** (必需)
   - **科目** (必需: 语文/数学/英语)
   - **成绩** (必需: 0-100)
   - **考试日期** (可选)
3. 点击"解析文件"预览数据
4. 点击"导入到数据库"完成批量导入

### 数据分析
- **学生分析**: 选择学生查看个人成绩趋势、排名变化
- **班级分析**: 选择班级查看整体统计、平均分趋势、成绩分布

## 🗄 数据库设计

### 表结构
- `Student` - 学生信息 (id, name, classId)
- `Class` - 班级信息 (id, name)  
- `Exam` - 考试信息 (id, name, date)
- `Score` - 成绩记录 (id, studentId, examId, subject, score, createdAt)

### 约束规则
- 同一学生在同一考试的同一科目只能有一条成绩记录
- 科目限定为：语文(CHINESE)、数学(MATH)、英语(ENGLISH)
- 成绩范围：0-100分

## 🔧 开发命令

```bash
# 开发服务器
npm run dev

# 构建项目
npm run build

# 重置数据库
npm run db:reset

# 运行种子数据
npm run db:seed

# 查看数据库
npx prisma studio
```

## 📊 示例数据

系统预装了以下示例数据：
- 2个班级：高一(1)班、高一(2)班
- 5名学生：张三、李四、王五、赵六、孙七
- 3次考试：月考一、期中考试、期末考试
- 45条成绩记录(覆盖所有学生×考试×科目)

## 🎯 主要特点

1. **智能数据处理** - 导入时自动创建不存在的班级、学生、考试
2. **重复数据保护** - 防止同一学生同一考试同一科目的重复录入
3. **丰富的可视化** - 多种图表类型展示数据趋势和对比
4. **响应式设计** - 支持桌面和移动端访问
5. **错误处理** - 完善的数据验证和错误提示
6. **性能优化** - 按需加载和数据缓存

开始使用这个强大的成绩管理系统，让数据分析变得简单高效！ 🚀
