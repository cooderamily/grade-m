(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{88056:function(e,t,s){Promise.resolve().then(s.bind(s,76287))},87138:function(e,t,s){"use strict";s.d(t,{default:function(){return i.a}});var a=s(231),i=s.n(a)},76287:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(57437),i=s(2265),r=s(87138),n=s(89733),l=s(48185),c=s(77209),d=s(41646),o=s(2128),h=s(86763),u=s(78030);let m=(0,u.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=(0,u.Z)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),p=(0,u.Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),f=(0,u.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),j=(0,u.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),v=(0,u.Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),y=(0,u.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),g=(0,u.Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),N=(0,u.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function b(){let{toast:e}=(0,h.pm)(),[t,s]=(0,i.useState)("classes"),[u,b]=(0,i.useState)([]),[w,k]=(0,i.useState)([]),[S,z]=(0,i.useState)([]),[C,T]=(0,i.useState)([]),[M,I]=(0,i.useState)(null),[O,_]=(0,i.useState)(null),[E,Z]=(0,i.useState)(null),[P,R]=(0,i.useState)(null),[D,A]=(0,i.useState)(""),[V,F]=(0,i.useState)(""),[Y,H]=(0,i.useState)(""),[B,J]=(0,i.useState)(""),[L,Q]=(0,i.useState)(""),[U,q]=(0,i.useState)(""),[G,K]=(0,i.useState)(""),[W,$]=(0,i.useState)(""),[X,ee]=(0,i.useState)(""),[et,es]=(0,i.useState)(null),[ea,ei]=(0,i.useState)(!1);(0,i.useEffect)(()=>{er()},[]);let er=async()=>{ei(!0);try{await Promise.all([en(),el(),ec(),ed()])}finally{ei(!1)}},en=async()=>{try{let e=await fetch("/api/classes");if(e.ok){let t=await e.json();b(t)}}catch(e){console.error("加载班级数据失败:",e)}},el=async()=>{try{let e=await fetch("/api/students");if(e.ok){let t=await e.json();k(t)}}catch(e){console.error("加载学生数据失败:",e)}},ec=async()=>{try{let e=await fetch("/api/exams");if(e.ok){let t=await e.json();z(t)}}catch(e){console.error("加载考试数据失败:",e)}},ed=async()=>{try{let e=await fetch("/api/scores");if(e.ok){let t=await e.json();T(t)}}catch(e){console.error("加载成绩数据失败:",e)}},eo=async t=>{ei(!0);try{let s=await fetch("/api/scores",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)await ed(),R(null),e({title:"成功",description:"成绩记录更新成功"});else{let t=await s.json();e({title:"错误",description:t.error||"更新成绩记录失败",variant:"destructive"})}}catch(t){console.error("更新成绩记录失败:",t),e({title:"错误",description:"更新成绩记录失败",variant:"destructive"})}finally{ei(!1)}},eh=async t=>{if(confirm("确定要删除这条成绩记录吗？")){ei(!0);try{let s=await fetch("/api/scores?id=".concat(t),{method:"DELETE"});if(s.ok)await ed(),e({title:"成功",description:"成绩记录删除成功"});else{let t=await s.json();e({title:"错误",description:t.error||"删除成绩记录失败",variant:"destructive"})}}catch(t){console.error("删除成绩记录失败:",t),e({title:"错误",description:"删除成绩记录失败",variant:"destructive"})}finally{ei(!1)}}},eu=async()=>{if(!D.trim()){e({title:"错误",description:"请输入班级名称",variant:"destructive"});return}try{let t=await fetch("/api/classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:D})});if(t.ok)e({title:"成功",description:"班级创建成功"}),A(""),en();else{let s=await t.json();e({title:"创建失败",description:s.error||"未知错误",variant:"destructive"})}}catch(t){console.error("创建班级失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},em=async t=>{try{let s=await fetch("/api/classes",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)e({title:"成功",description:"班级更新成功"}),I(null),en();else{let t=await s.json();e({title:"更新失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("更新班级失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ex=async t=>{if(confirm("确定要删除这个班级吗？此操作不可撤销。"))try{let s=await fetch("/api/classes?id=".concat(t),{method:"DELETE"});if(s.ok)e({title:"成功",description:"班级删除成功"}),en(),el();else{let t=await s.json();e({title:"删除失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("删除班级失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ep=async()=>{if(!V.trim()||!Y){e({title:"错误",description:"请填写学生姓名和选择班级",variant:"destructive"});return}try{let t=await fetch("/api/students",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:V,classId:parseInt(Y)})});if(t.ok)e({title:"成功",description:"学生创建成功"}),F(""),H(""),el(),en();else{let s=await t.json();e({title:"创建失败",description:s.error||"未知错误",variant:"destructive"})}}catch(t){console.error("创建学生失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ef=async t=>{try{let s=await fetch("/api/students",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)e({title:"成功",description:"学生信息更新成功"}),_(null),el(),en();else{let t=await s.json();e({title:"更新失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("更新学生失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ej=async t=>{if(confirm("确定要删除这个学生吗？此操作不可撤销。"))try{let s=await fetch("/api/students?id=".concat(t),{method:"DELETE"});if(s.ok)e({title:"成功",description:"学生删除成功"}),el(),en();else{let t=await s.json();e({title:"删除失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("删除学生失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ev=async()=>{if(!B.trim()||!L){e({title:"错误",description:"请填写考试名称和日期",variant:"destructive"});return}try{let t=await fetch("/api/exams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:B,date:L})});if(t.ok)e({title:"成功",description:"考试创建成功"}),J(""),Q(""),ec();else{let s=await t.json();e({title:"创建失败",description:s.error||"未知错误",variant:"destructive"})}}catch(t){console.error("创建考试失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},ey=async t=>{try{let s=await fetch("/api/exams",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)e({title:"成功",description:"考试信息更新成功"}),Z(null),ec();else{let t=await s.json();e({title:"更新失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("更新考试失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}},eg=async t=>{if(confirm("确定要删除这个考试吗？此操作不可撤销。"))try{let s=await fetch("/api/exams?id=".concat(t),{method:"DELETE"});if(s.ok)e({title:"成功",description:"考试删除成功"}),ec();else{let t=await s.json();e({title:"删除失败",description:t.error||"未知错误",variant:"destructive"})}}catch(t){console.error("删除考试失败:",t),e({title:"网络错误",description:"请检查网络连接",variant:"destructive"})}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-background",children:(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4 justify-between",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"数据管理"}),(0,a.jsx)(r.default,{href:"/",children:(0,a.jsxs)(n.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(N,{className:"w-4 h-4 mr-2"}),"返回首页"]})})]})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("div",{className:"flex gap-2 border-b",children:[{key:"classes",label:"班级管理",icon:x},{key:"students",label:"学生管理",icon:j},{key:"exams",label:"考试管理",icon:v},{key:"scores",label:"成绩管理",icon:g}].map(e=>{let{key:i,label:r,icon:n}=e;return(0,a.jsxs)("button",{onClick:()=>s(i),className:"flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ".concat(t===i?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(n,{className:"w-4 h-4"}),r]},i)})})}),(0,a.jsxs)("div",{children:["classes"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5"}),"创建新班级"]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(d._,{htmlFor:"class-name",children:"班级名称"}),(0,a.jsx)(c.I,{id:"class-name",placeholder:"请输入班级名称",value:D,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&eu()})]}),(0,a.jsx)(n.z,{onClick:eu,className:"self-end",children:"创建班级"})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(x,{className:"w-5 h-5"}),"班级管理 (",u.length,")"]})}),(0,a.jsx)(l.aY,{children:ea?(0,a.jsx)("div",{className:"text-center py-4",children:"加载中..."}):u.length>0?(0,a.jsx)("div",{className:"grid gap-4",children:u.map(e=>(0,a.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:(null==M?void 0:M.id)===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(c.I,{value:M.name,onChange:e=>I({...M,name:e.target.value}),onKeyPress:e=>"Enter"===e.key&&em(M)}),(0,a.jsx)(n.z,{size:"sm",onClick:()=>em(M),children:"保存"}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>I(null),children:"取消"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.students.length," 名学生"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>I(e),children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>ex(e.id),disabled:e.students.length>0,children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})]})},e.id))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无班级数据，请创建第一个班级"})})]})]}),"students"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5"}),"添加新学生"]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"student-name",children:"学生姓名"}),(0,a.jsx)(c.I,{id:"student-name",placeholder:"请输入学生姓名",value:V,onChange:e=>F(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"student-class",children:"选择班级"}),(0,a.jsxs)(o.Ph,{value:Y,onValueChange:H,children:[(0,a.jsx)(o.i4,{id:"student-class",children:(0,a.jsx)(o.ki,{placeholder:"选择班级"})}),(0,a.jsx)(o.Bw,{children:u.map(e=>(0,a.jsx)(o.Ql,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,a.jsx)(n.z,{onClick:ep,className:"self-end",children:"添加学生"})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"w-5 h-5"}),"学生管理 (",w.length,")"]})}),(0,a.jsx)(l.aY,{children:ea?(0,a.jsx)("div",{className:"text-center py-4",children:"加载中..."}):w.length>0?(0,a.jsx)("div",{className:"grid gap-4",children:w.map(e=>{var t;return(0,a.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:(null==O?void 0:O.id)===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(c.I,{value:O.name,onChange:e=>_({...O,name:e.target.value}),placeholder:"学生姓名"}),(0,a.jsxs)(o.Ph,{value:O.classId.toString(),onValueChange:e=>_({...O,classId:parseInt(e)}),children:[(0,a.jsx)(o.i4,{className:"w-48",children:(0,a.jsx)(o.ki,{})}),(0,a.jsx)(o.Bw,{children:u.map(e=>(0,a.jsx)(o.Ql,{value:e.id.toString(),children:e.name},e.id))})]}),(0,a.jsx)(n.z,{size:"sm",onClick:()=>ef(O),children:"保存"}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>_(null),children:"取消"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null===(t=e.class)||void 0===t?void 0:t.name})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>_(e),children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>ej(e.id),children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})]})},e.id)})}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无学生数据，请先创建班级后添加学生"})})]})]}),"exams"===t&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5"}),"创建新考试"]})}),(0,a.jsx)(l.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"exam-name",children:"考试名称"}),(0,a.jsx)(c.I,{id:"exam-name",placeholder:"请输入考试名称",value:B,onChange:e=>J(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d._,{htmlFor:"exam-date",children:"考试日期"}),(0,a.jsx)(c.I,{id:"exam-date",type:"date",value:L,onChange:e=>Q(e.target.value)})]}),(0,a.jsx)(n.z,{onClick:ev,className:"self-end",children:"创建考试"})]})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v,{className:"w-5 h-5"}),"考试管理 (",S.length,")"]})}),(0,a.jsx)(l.aY,{children:ea?(0,a.jsx)("div",{className:"text-center py-4",children:"加载中..."}):S.length>0?(0,a.jsx)("div",{className:"grid gap-4",children:S.map(e=>(0,a.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:(null==E?void 0:E.id)===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(c.I,{value:E.name,onChange:e=>Z({...E,name:e.target.value}),placeholder:"考试名称"}),(0,a.jsx)(c.I,{type:"date",value:E.date.split("T")[0],onChange:e=>Z({...E,date:e.target.value})}),(0,a.jsx)(n.z,{size:"sm",onClick:()=>ey(E),children:"保存"}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>Z(null),children:"取消"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),new Date(e.date).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>{es(e.id),s("scores")},title:"查看该考试的成绩",children:(0,a.jsx)(g,{className:"w-4 h-4"})}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>Z(e),children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>eg(e.id),children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})]})},e.id))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无考试数据，请创建第一个考试"})})]})]}),"scores"===t&&(()=>{let e=et?C.filter(e=>e.examId===et):C,t=et?S.find(e=>e.id===et):null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(l.Zb,{children:(0,a.jsx)(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[et&&(0,a.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>es(null),children:[(0,a.jsx)(N,{className:"w-4 h-4 mr-2"}),"返回全部成绩"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:t?"".concat(t.name," - 成绩管理"):"成绩管理"}),t&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["考试日期：",t.date]})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["共 ",e.length," 条记录"]})]})})}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"成绩记录"})}),(0,a.jsx)(l.aY,{children:e.length>0?(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:(null==P?void 0:P.id)===e.id?(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsxs)(o.Ph,{value:P.studentId.toString(),onValueChange:e=>R({...P,studentId:parseInt(e)}),children:[(0,a.jsx)(o.i4,{className:"w-[180px]",children:(0,a.jsx)(o.ki,{})}),(0,a.jsx)(o.Bw,{children:w.map(e=>{var t;return(0,a.jsxs)(o.Ql,{value:e.id.toString(),children:[e.name," (",null===(t=e.class)||void 0===t?void 0:t.name,")"]},e.id)})})]}),(0,a.jsxs)(o.Ph,{value:P.examId.toString(),onValueChange:e=>R({...P,examId:parseInt(e)}),children:[(0,a.jsx)(o.i4,{className:"w-[150px]",children:(0,a.jsx)(o.ki,{})}),(0,a.jsx)(o.Bw,{children:S.map(e=>(0,a.jsx)(o.Ql,{value:e.id.toString(),children:e.name},e.id))})]}),(0,a.jsxs)(o.Ph,{value:P.subject,onValueChange:e=>R({...P,subject:e}),children:[(0,a.jsx)(o.i4,{className:"w-[100px]",children:(0,a.jsx)(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[(0,a.jsx)(o.Ql,{value:"语文",children:"语文"}),(0,a.jsx)(o.Ql,{value:"数学",children:"数学"}),(0,a.jsx)(o.Ql,{value:"英语",children:"英语"})]})]}),(0,a.jsx)(c.I,{type:"number",min:"0",max:"100",value:P.score,onChange:e=>R({...P,score:parseFloat(e.target.value)||0}),className:"w-[100px]"}),(0,a.jsx)(n.z,{size:"sm",onClick:()=>eo(P),children:"保存"}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>R(null),children:"取消"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 flex-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.student.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.student.class.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:e.exam.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.exam.date})]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-semibold",children:e.subject})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"font-semibold text-lg",children:[e.score,"分"]})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>R(e),children:(0,a.jsx)(p,{className:"w-4 h-4"})}),(0,a.jsx)(n.z,{size:"sm",variant:"outline",onClick:()=>eh(e.id),children:(0,a.jsx)(f,{className:"w-4 h-4"})})]})]})},e.id))}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"暂无成绩数据，请添加第一条成绩记录"})})]})]})})()]})]})})}},89733:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(57437),i=s(2265),r=s(71538),n=s(13027),l=s(49354);let c=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:s,variant:i,size:n,asChild:d=!1,...o}=e,h=d?r.g7:"button";return(0,a.jsx)(h,{className:(0,l.cn)(c({variant:i,size:n,className:s})),ref:t,...o})});d.displayName="Button"},48185:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var a=s(57437),i=s(2265),r=s(49354);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});n.displayName="Card";let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...i})});l.displayName="CardHeader";let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...i})});c.displayName="CardTitle",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...i})}).displayName="CardDescription";let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...i})});d.displayName="CardContent",i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...i})}).displayName="CardFooter"},77209:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(57437),i=s(2265),r=s(49354);let n=i.forwardRef((e,t)=>{let{className:s,type:i,...n}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},41646:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var a=s(57437),i=s(2265),r=s(25171),n=i.forwardRef((e,t)=>(0,a.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=s(13027),c=s(49354);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(n,{ref:t,className:(0,c.cn)(d(),s),...i})});o.displayName=n.displayName},2128:function(e,t,s){"use strict";s.d(t,{Bw:function(){return p},Ph:function(){return o},Ql:function(){return f},i4:function(){return u},ki:function(){return h}});var a=s(57437),i=s(2265),r=s(48243),n=s(42421),l=s(14392),c=s(22468),d=s(49354);let o=r.fC;r.ZA;let h=r.B4,u=i.forwardRef((e,t)=>{let{className:s,children:i,...l}=e;return(0,a.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[i,(0,a.jsx)(r.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=r.xz.displayName;let m=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...i,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=r.u_.displayName;let x=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...i,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.$G.displayName;let p=i.forwardRef((e,t)=>{let{className:s,children:i,position:n="popper",...l}=e;return(0,a.jsx)(r.h_,{children:(0,a.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,a.jsx)(x,{})]})})});p.displayName=r.VY.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...i})}).displayName=r.__.displayName;let f=i.forwardRef((e,t)=>{let{className:s,children:i,...n}=e;return(0,a.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(r.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(r.eT,{children:i})]})});f.displayName=r.ck.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...i})}).displayName=r.Z0.displayName},86763:function(e,t,s){"use strict";s.d(t,{pm:function(){return u}});var a=s(2265);let i=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function o(e){d=l(d,e),c.forEach(e=>{e(d)})}function h(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},49354:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(44839),i=s(96164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.m6)((0,a.W)(t))}}},function(e){e.O(0,[314,402,115,231,971,23,744],function(){return e(e.s=88056)}),_N_E=e.O()}]);