var W=Object.defineProperty;var Y=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var Q=(l,d)=>()=>(l&&(d=l(l=0)),d);var H=(l,d,j,f)=>{if(d&&typeof d=="object"||typeof d=="function")for(let g of z(d))!J.call(l,g)&&g!==j&&W(l,g,{get:()=>d[g],enumerable:!(f=Y(d,g))||f.enumerable});return l},q=(l,d,j)=>(H(l,d,"default"),j&&H(j,d,"default"));var Z=l=>H(W({},"__esModule",{value:!0}),l);var F={};import*as dt from"async_hooks";var V=Q(()=>{q(F,dt)});import{__getNamedExports as ee}from"../../../__next-on-pages-dist__/webpack/9802cf9bbc098bad310494fcc153465f.js";import{__getNamedExports as te}from"../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";import"../../../__next-on-pages-dist__/wasm/wasm_848bce377ad47c933e205bdb413ae8af5ac0ccf0.wasm";var T=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/students"),t=ee(T,T,T),ne=t.__chunk_1146,_e=t.__chunk_6195,ae=t.__chunk_2067,re=t.__chunk_5486,se=t.__chunk_7223,ce=t.__chunk_1548,oe=t.__chunk_2780,ue=t.__chunk_5612,ie=t.__chunk_2262,le=t.__chunk_1465,de=t.__chunk_1869,he=t.__chunk_5524,pe=t.__chunk_8536,ke=t.__chunk_6765,ye=t.__chunk_9814,fe=t.__chunk_9859,ge=t.__chunk_9307,me=t.__chunk_74,xe=t.__chunk_4123,Ne=t.__chunk_3412,Ee=t.__chunk_8978,ve=t.__chunk_1812,Re=t.__chunk_1673,Te=t.__chunk_7398,we=t.__chunk_5376,be=t.__chunk_6617,Oe=t.__chunk_5767,Ie=t.__chunk_8260,Ae=t.__chunk_5027,Se=t.__chunk_2738,je=t.__chunk_2113,Pe=t.__chunk_5065,Me=t.__chunk_5514,Ce=t.__chunk_2860,Fe=t.__chunk_5257,$e=t.__chunk_8427,De=t.__chunk_8997,Le=t.__chunk_8024,Ue=t.__chunk_2403,Be=t.__chunk_8690,Ke=t.__chunk_6265,He=t.__chunk_5492,qe=t.__chunk_3059,Ge=t.__chunk_8610,Xe=t.__chunk_7959,We=t.__chunk_4303,Ve=t.__chunk_3326,Ye=t.__chunk_391,ze=t.__chunk_8789,Je=t.__chunk_552,Qe=t.__chunk_7649,Ze=t.__chunk_2501,et=t.__chunk_6443,tt=t.__chunk_1616,nt=t.__chunk_2034,_t=t.__chunk_3131,at=t.__chunk_2328,rt=t.__chunk_8908,st=t.__chunk_1713,ct=t.__chunk_1172,G=te(T,T,T),ot=G.__NEXT_FONT_MANIFEST,ut=G.__REACT_LOADABLE_MANIFEST,it=G.__BUILD_MANIFEST,ft=((l,d,j)=>(d._ENTRIES={},l.__BUILD_MANIFEST=it,l.__REACT_LOADABLE_MANIFEST=ut,l.__NEXT_FONT_MANIFEST=ot,l.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",l.__PRERENDER_MANIFEST='{"version":4,"routes":{"/":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/page,_N_T_/"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/","dataRoute":"/index.rsc"},"/scores/import":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/scores/layout,_N_T_/scores/import/layout,_N_T_/scores/import/page,_N_T_/scores/import"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/scores/import","dataRoute":"/scores/import.rsc"},"/management":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/management/layout,_N_T_/management/page,_N_T_/management"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/management","dataRoute":"/management.rsc"},"/analysis/student":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/analysis/layout,_N_T_/analysis/student/layout,_N_T_/analysis/student/page,_N_T_/analysis/student"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/analysis/student","dataRoute":"/analysis/student.rsc"},"/analysis/class":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/analysis/layout,_N_T_/analysis/class/layout,_N_T_/analysis/class/page,_N_T_/analysis/class"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/analysis/class","dataRoute":"/analysis/class.rsc"},"/scores/add":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/scores/layout,_N_T_/scores/add/layout,_N_T_/scores/add/page,_N_T_/scores/add"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/scores/add","dataRoute":"/scores/add.rsc"}},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"process.env.__NEXT_PREVIEW_MODE_ID","previewModeSigningKey":"process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY","previewModeEncryptionKey":"process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY"}}',(()=>{"use strict";var f={},g={};function s(n){var u=g[n];if(u!==void 0)return u.exports;var r=g[n]={id:n,loaded:!1,exports:{}},h=!0;try{f[n](r,r.exports,s),h=!1}finally{h&&delete g[n]}return r.loaded=!0,r.exports}s.m=f,s.amdO={},(()=>{var n=[];s.O=(u,r,h,k)=>{if(r){k=k||0;for(var i=n.length;i>0&&n[i-1][2]>k;i--)n[i]=n[i-1];n[i]=[r,h,k];return}for(var o=1/0,i=0;i<n.length;i++){for(var[r,h,k]=n[i],y=!0,x=0;x<r.length;x++)o>=k&&Object.keys(s.O).every(w=>s.O[w](r[x]))?r.splice(x--,1):(y=!1,k<o&&(o=k));if(y){n.splice(i--,1);var v=h();v!==void 0&&(u=v)}}return u}})(),s.n=n=>{var u=n&&n.__esModule?()=>n.default:()=>n;return s.d(u,{a:u}),u},(()=>{var n,u=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__;s.t=function(r,h){if(1&h&&(r=this(r)),8&h||typeof r=="object"&&r&&(4&h&&r.__esModule||16&h&&typeof r.then=="function"))return r;var k=Object.create(null);s.r(k);var i={};n=n||[null,u({}),u([]),u(u)];for(var o=2&h&&r;typeof o=="object"&&!~n.indexOf(o);o=u(o))Object.getOwnPropertyNames(o).forEach(y=>i[y]=()=>r[y]);return i.default=()=>r,s.d(k,i),k}})(),s.d=(n,u)=>{for(var r in u)s.o(u,r)&&!s.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:u[r]})},s.e=()=>Promise.resolve(),s.g=function(){if(typeof d=="object")return d;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),s.o=(n,u)=>Object.prototype.hasOwnProperty.call(n,u),s.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},s.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),(()=>{var n={993:0};s.O.j=h=>n[h]===0;var u=(h,k)=>{var i,o,[y,x,v]=k,I=0;if(y.some(M=>n[M]!==0)){for(i in x)s.o(x,i)&&(s.m[i]=x[i]);if(v)var P=v(s)}for(h&&h(k);I<y.length;I++)o=y[I],s.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return s.O(P)},r=l.webpackChunk_N_E=l.webpackChunk_N_E||[];r.forEach(u.bind(null,0)),r.push=u.bind(null,r.push.bind(r))})()})(),(l.webpackChunk_N_E=l.webpackChunk_N_E||[]).push([[962],{1172:ct,1713:st,8908:rt,2328:at,3131:_t,2034:nt,1616:tt,6443:et,2501:Ze,7649:Qe,552:Je,8789:ze,391:Ye,3326:Ve,4303:We,7959:Xe,8610:Ge,3059:qe,5492:He,6265:Ke,8690:Be,2403:Ue,8024:Le,8997:De,8427:$e,5257:Fe,2860:Ce,5514:Me,5065:Pe,2113:je,2738:Se,5027:Ae,8260:Ie,5767:Oe,6617:be,5376:we,7398:Te,1673:Re,1812:ve,8978:Ee,3412:Ne,4123:xe,74:me,9307:ge,9859:fe,9814:ye,6765:ke,8536:pe,5524:he,1869:de,1465:le,2262:ie,5612:ue,2780:oe,1548:ce,7223:se,5486:re}]),(l.webpackChunk_N_E=l.webpackChunk_N_E||[]).push([[393],{2067:ae,6195:_e,2279:(f,g,s)=>{"use strict";s.r(g),s.d(g,{ComponentMod:()=>K,default:()=>b});var n={};s.r(n),s.d(n,{DELETE:()=>C,GET:()=>I,POST:()=>P,PUT:()=>M,dynamic:()=>v,runtime:()=>x});var u={};s.r(u),s.d(u,{originalPathname:()=>U,patchFetch:()=>B,requestAsyncStorage:()=>L,routeModule:()=>w,serverHooks:()=>D,staticGenerationAsyncStorage:()=>$});var r=s(8260),h=s(5514),k=s(2860),i=s(2113),o=s(5492),y=s(1146);let x="edge",v="force-dynamic";async function I(E,p){let e=(0,y.N)(p);try{let a=E.nextUrl.searchParams.get("classId");if(a){let _=await e.student.findMany({where:{classId:parseInt(a)},include:{class:!0}});return o.xk.json(_)}{let _=await e.student.findMany({include:{class:!0}});return o.xk.json(_)}}catch(a){return console.error("\u83B7\u53D6\u5B66\u751F\u5217\u8868\u5931\u8D25:",a),o.xk.json({error:"\u83B7\u53D6\u5B66\u751F\u5217\u8868\u5931\u8D25"},{status:500})}finally{p?.env?.DB||await e.$disconnect()}}async function P(E,p){let e=(0,y.N)(p);try{let{name:a,classId:_}=await E.json();if(!a||a.trim()===""||!_)return o.xk.json({error:"\u5B66\u751F\u59D3\u540D\u548C\u73ED\u7EA7\u4E0D\u80FD\u4E3A\u7A7A"},{status:400});let c=await e.student.create({data:{name:a.trim(),classId:parseInt(_)},include:{class:!0}});return o.xk.json(c)}catch(a){return console.error("\u521B\u5EFA\u5B66\u751F\u5931\u8D25:",a),o.xk.json({error:"\u521B\u5EFA\u5B66\u751F\u5931\u8D25"},{status:500})}finally{p?.env?.DB||await e.$disconnect()}}async function M(E,p){let e=(0,y.N)(p);try{let{id:a,name:_,classId:c}=await E.json();if(!a||!_||_.trim()===""||!c)return o.xk.json({error:"\u5B66\u751FID\u3001\u59D3\u540D\u548C\u73ED\u7EA7\u4E0D\u80FD\u4E3A\u7A7A"},{status:400});let N=await e.student.update({where:{id:parseInt(a)},data:{name:_.trim(),classId:parseInt(c)},include:{class:!0}});return o.xk.json(N)}catch(a){return console.error("\u66F4\u65B0\u5B66\u751F\u5931\u8D25:",a),o.xk.json({error:"\u66F4\u65B0\u5B66\u751F\u5931\u8D25"},{status:500})}finally{p?.env?.DB||await e.$disconnect()}}async function C(E,p){let e=(0,y.N)(p);try{let a=E.nextUrl.searchParams.get("id");if(!a)return o.xk.json({error:"\u5B66\u751FID\u4E0D\u80FD\u4E3A\u7A7A"},{status:400});let _=await e.student.findUnique({where:{id:parseInt(a)},include:{scores:!0}});return _&&_.scores.length>0?o.xk.json({error:"\u4E0D\u80FD\u5220\u9664\u6709\u6210\u7EE9\u8BB0\u5F55\u7684\u5B66\u751F\uFF0C\u8BF7\u5148\u5220\u9664\u76F8\u5173\u6210\u7EE9"},{status:400}):(await e.student.delete({where:{id:parseInt(a)}}),o.xk.json({message:"\u5B66\u751F\u5220\u9664\u6210\u529F"}))}catch(a){return console.error("\u5220\u9664\u5B66\u751F\u5931\u8D25:",a),o.xk.json({error:"\u5220\u9664\u5B66\u751F\u5931\u8D25"},{status:500})}finally{p?.env?.DB||await e.$disconnect()}}let w=new h.AppRouteRouteModule({definition:{kind:k.x.APP_ROUTE,page:"/api/students/route",pathname:"/api/students",filename:"route",bundlePath:"app/api/students/route"},resolvedPagePath:"/Users/ryan/demo2/AI/Grade_M2/src/app/api/students/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:L,staticGenerationAsyncStorage:$,serverHooks:D}=w,U="/api/students/route";function B(){return(0,i.XH)({serverHooks:D,staticGenerationAsyncStorage:$})}let K=u,b=r.a.wrap(w)},1146:ne},f=>{var g=n=>f(f.s=n);f.O(0,[962],()=>g(2279));var s=f.O();(d._ENTRIES=typeof d._ENTRIES>"u"?{}:d._ENTRIES)["middleware_app/api/students/route"]=s}]),function(){let f={exports:{},loaded:!1};return function(s,n){var u=Object.create,r=Object.defineProperty,h=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,i=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,y=e=>r(e,"__esModule",{value:!0}),x=(e,a)=>{y(e);for(var _ in a)r(e,_,{get:a[_],enumerable:!0})},v=(e,a,_)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of k(a))!o.call(e,c)&&c!=="default"&&r(e,c,{get:()=>a[c],enumerable:!(_=h(a,c))||_.enumerable});return e},I=e=>v(y(r(e!=null?u(i(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);x(n,{default:()=>K});var P=I((V(),Z(F))),M="@next/request-context",C=Symbol.for(M),w=Symbol.for("internal.storage");function L(){let e=d;if(!e[C]){let a=new P.AsyncLocalStorage,_={get:()=>a.getStore(),[w]:a};e[C]=_}return e[C]}var $=L();function D(e,a){return $[w].run(e,a)}function U(e){let a={};return e&&e.forEach((_,c)=>{a[c]=_,c.toLowerCase()==="set-cookie"&&(a[c]=B(_))}),a}function B(e){let a=[],_=0,c,N,m,A,S;function R(){for(;_<e.length&&/\s/.test(e.charAt(_));)_+=1;return _<e.length}function O(){return N=e.charAt(_),N!=="="&&N!==";"&&N!==","}for(;_<e.length;){for(c=_,S=!1;R();)if(N=e.charAt(_),N===","){for(m=_,_+=1,R(),A=_;_<e.length&&O();)_+=1;_<e.length&&e.charAt(_)==="="?(S=!0,_=A,a.push(e.substring(c,m)),c=_):_=m+1}else _+=1;(!S||_>=e.length)&&a.push(e.substring(c,e.length))}return a}function K(e){let a=e.staticRoutes.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page})),_=e.dynamicRoutes?.map(c=>({regexp:new RegExp(c.namedRegex),page:c.page}))||[];return async function(c,N){let m=new URL(c.url).pathname,A={};if(e.nextConfig?.basePath&&m.startsWith(e.nextConfig.basePath)&&(m=m.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let R of e.nextConfig.i18n.locales){let O=new RegExp(`^/${R}($|/)`,"i");if(m.match(O)){m=m.replace(O,"/")||"/";break}}for(let R of a)if(R.regexp.exec(m)){A.name=R.page;break}if(!A.name){let R=E(m);for(let O of _||[]){if(R&&!E(O.page))continue;let X=O.regexp.exec(m);if(X){A={name:O.page,params:X.groups};break}}}let S=await D({waitUntil:N.waitUntil},()=>d._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:c.url,method:c.method,headers:U(c.headers),ip:b(c.headers,p.Ip),geo:{city:b(c.headers,p.City,!0),country:b(c.headers,p.Country,!0),latitude:b(c.headers,p.Latitude),longitude:b(c.headers,p.Longitude),region:b(c.headers,p.Region,!0)},nextConfig:e.nextConfig,page:A,body:c.body}}));return S.waitUntil&&N.waitUntil(S.waitUntil),S.response}}function b(e,a,_=!1){let c=e.get(a)||void 0;return _&&c?decodeURIComponent(c):c}function E(e){return e==="/api"||e.startsWith("/api/")}var p;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(p||(p={}))}(f,f.exports),f.exports}.call({}).default({name:"app/api/students/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/analysis/class",regex:"^/analysis/class(?:/)?$",routeKeys:{},namedRegex:"^/analysis/class(?:/)?$"},{page:"/analysis/student",regex:"^/analysis/student(?:/)?$",routeKeys:{},namedRegex:"^/analysis/student(?:/)?$"},{page:"/management",regex:"^/management(?:/)?$",routeKeys:{},namedRegex:"^/management(?:/)?$"},{page:"/scores/add",regex:"^/scores/add(?:/)?$",routeKeys:{},namedRegex:"^/scores/add(?:/)?$"},{page:"/scores/import",regex:"^/scores/import(?:/)?$",routeKeys:{},namedRegex:"^/scores/import(?:/)?$"}],dynamicRoutes:[],nextConfig:{basePath:""}})))(T,T,T);export{ft as default};
